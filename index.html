<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWP SERVER</title>
    <style>
        :root {
            --bg-color-dark: #0a0a0a;
            --text-color-dark: #fff;
            --card-bg-dark: rgba(25, 25, 35, 0.85);
            --feature-card-bg-dark: rgba(45, 45, 65, 0.7);
            --border-color-dark: rgba(255, 255, 255, 0.1);
            --primary-color: #7289da;
            --primary-shadow-color: rgba(114, 137, 218, 0.7);
            --input-bg-dark: rgba(30, 30, 30, 0.8);
            --placeholder-color-dark: #ccc;
        }

        .light-mode {
            --bg-color-dark: #f0f2f5;
            --text-color-dark: #333;
            --card-bg-dark: rgba(255, 255, 255, 0.9);
            --feature-card-bg-dark: rgba(240, 240, 245, 0.9);
            --border-color-dark: rgba(0, 0, 0, 0.1);
            --primary-color: #5865f2;
            --primary-shadow-color: rgba(88, 101, 242, 0.5);
            --input-bg-dark: rgba(255, 255, 255, 0.95);
            --placeholder-color-dark: #666;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }

        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
        body {
            background-color: var(--bg-color-dark);
            color: var(--text-color-dark);
            overflow-x: hidden;
            background-image: url('https://cdn.discordapp.com/attachments/1137869934010052668/1375892910922272899/IMG_7206.jpg?ex=683357a0&is=68320620&hm=eaeaec759217ae74d7636bc562f6c84e4e1e10636a9b77193559f94fa33c829e&');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            height: 100vh;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(10, 10, 10, 0.8), rgba(20, 20, 35, 0.85));
            z-index: -1;
        }
        
        .light-mode body::before {
            background: linear-gradient(rgba(240, 242, 245, 0.8), rgba(220, 220, 235, 0.85));
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--border-color-dark);
            margin-bottom: 40px;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo img {
            width: 72px;
            height: 72px;
            margin-left: 15px;
        }

        .logo-text {
            font-size: 28px;
            font-weight: bold;
            color: var(--primary-color);
            text-shadow: 0 0 10px var(--primary-shadow-color);
        }

        nav ul {
            display: flex;
            list-style: none;
            flex-wrap: wrap; /* Allow wrapping for smaller screens */
            justify-content: center;
        }

        nav ul li {
            margin-right: 15px;
            /* Smaller margin */
            margin-bottom: 10px;
            /* For wrapping */
        }

        nav ul li:last-child {
            margin-right: 0;
        }

        .btn {
            background-color: var(--primary-color);
            color: #fff;
            padding: 10px 20px; /* Slightly smaller padding */
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            box-shadow: 0 0 15px var(--primary-shadow-color);
            position: relative;
            overflow: hidden;
            font-size: 16px; /* Adjust font size if needed */
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 20px var(--primary-shadow-color);
        }

        .main-content {
            text-align: center;
            margin-top: 50px;
        }

        .title {
            font-size: 48px;
            margin-bottom: 20px;
            color: var(--primary-color);
            text-shadow: 0 0 15px var(--primary-shadow-color);
            animation: glow 2s infinite alternate;
        }

        @keyframes glow {
            from {
                text-shadow: 0 0 10px var(--primary-shadow-color);
            }
            to {
                text-shadow: 0 0 20px var(--primary-color), 0 0 30px var(--primary-shadow-color);
            }
        }

        .subtitle {
            font-size: 20px;
            margin-bottom: 40px;
            color: var(--placeholder-color-dark);
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap; /* Allow wrapping for smaller screens */
        }

        .page {
            display: none;
            padding: 40px;
            background: var(--card-bg-dark);
            border-radius: 15px;
            margin-top: 30px;
            box-shadow: 0 0 30px var(--primary-shadow-color);
            animation: fadeIn 0.5s ease;
            max-height: 500px;
            overflow-y: auto;
            text-align: right;
            backdrop-filter: blur(5px);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .page h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 28px;
            text-shadow: 0 0 10px var(--primary-shadow-color);
        }

        .page p {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .page ul {
            padding-right: 20px;
            margin-bottom: 20px;
        }

        .page ul li {
            margin-bottom: 10px;
        }

        .features-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background: var(--feature-card-bg-dark);
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--primary-shadow-color);
            text-align: center;
            backdrop-filter: blur(5px);
        }

        .light-mode .feature-card {
            border: 1px solid rgba(88, 101, 242, 0.3);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px var(--primary-shadow-color);
            border-color: var(--primary-color);
        }

        .feature-icon {
            font-size: 36px;
            margin-bottom: 15px;
            color: var(--primary-color);
            text-shadow: 0 0 10px var(--primary-shadow-color);
        }

        .feature-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .feature-desc {
            font-size: 16px;
            color: var(--placeholder-color-dark);
            line-height: 1.5;
        }

        .rating-form, .login-form {
            text-align: right;
            padding: 20px;
            background: var(--feature-card-bg-dark);
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--primary-color);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #333;
            background: var(--input-bg-dark);
            color: var(--text-color-dark);
            font-size: 16px;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .rating-stars {
            display: flex;
            flex-direction: row-reverse;
            justify-content: flex-end;
            margin-bottom: 20px;
        }

        .rating-stars input {
            display: none;
        }

        .rating-stars label {
            cursor: pointer;
            font-size: 30px;
            color: #555;
            padding: 5px;
            transition: all 0.3s;
        }
        
        .light-mode .rating-stars label {
            color: #ccc;
        }

        .rating-stars label:hover,
        .rating-stars label:hover ~ label,
        .rating-stars input:checked ~ label {
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
        }

        .previous-reviews {
            margin-top: 30px;
            text-align: right;
        }

        .previous-reviews h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 24px;
        }

        .review-card {
            background: var(--feature-card-bg-dark);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(114, 137, 218, 0.2);
            text-align: right;
        }

        .review-card strong {
            color: var(--primary-color);
            font-size: 18px;
            display: block;
            margin-bottom: 5px;
        }

        .review-card .stars {
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 20px;
        }

        .review-card p {
            color: var(--text-color-dark);
            font-size: 15px;
        }

        /* Styles for new sections */
        .admin-panel-review-card {
            background: var(--feature-card-bg-dark);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(114, 137, 218, 0.2);
            text-align: right;
        }

        .admin-panel-review-card .actions button {
            margin-left: 10px;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .admin-panel-review-card .actions .approve-btn {
            background-color: #28a745;
            color: white;
            border: none;
        }

        .admin-panel-review-card .actions .delete-btn {
            background-color: #dc3545;
            color: white;
            border: none;
        }

        .server-status-card {
            background: var(--feature-card-bg-dark);
            padding: 25px;
            border-radius: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--primary-shadow-color);
            text-align: right;
            backdrop-filter: blur(5px);
            margin-top: 30px;
        }

        .server-status-card h3 {
            color: var(--primary-color);
            font-size: 22px;
            margin-bottom: 15px;
        }

        .server-status-card p {
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--text-color-dark);
        }

        .server-status-card .status-indicator {
            display: inline-block;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-left: 10px;
        }

        .server-status-card .status-online {
            background-color: #28a745; /* Green */
        }

        .server-status-card .status-offline {
            background-color: #dc3545; /* Red */
        }

        /* End new sections styles */

        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px 0;
            color: #aaa;
            font-size: 14px;
            border-top: 1px solid var(--border-color-dark);
        }

        .active-btn {
            background-color: #5865f2;
            box-shadow: 0 0 20px rgba(88, 101, 242, 0.7);
        }

        @keyframes float {
            0% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
            100% {
                transform: translateY(0px);
            }
        }

        .floating {
            animation: float 4s ease-in-out infinite;
        }

        .mode-toggle {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: var(--primary-color);
            color: #fff;
            padding: 10px 15px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            box-shadow: 0 0 15px var(--primary-shadow-color);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .mode-toggle:hover {
            background-color: #5865f2;
            box-shadow: 0 0 20px rgba(88, 101, 242, 0.8);
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                text-align: center;
            }

            nav ul {
                margin-top: 20px;
                justify-content: center;
            }

            .buttons {
                flex-direction: column;
                gap: 15px;
            }

            .title {
                font-size: 36px;
            }

            .subtitle {
                font-size: 18px;
            }

            .features-container {
                grid-template-columns: 1fr;
            }
            
            .mode-toggle {
                bottom: 10px;
                left: 10px;
                width: 45px;
                height: 45px;
                font-size: 20px;
            }
        }

        .success-message, .error-message, .spam-message {
            display: none;
            background-color: rgba(46, 204, 113, 0.8);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
        }
        
        .error-message, .spam-message {
            background-color: rgba(231, 76, 60, 0.8);
        }

        .login-section {
            background: var(--card-bg-dark);
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
            box-shadow: 0 0 30px var(--primary-shadow-color);
            text-align: right;
        }

        .login-section h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .login-info {
            background: var(--feature-card-bg-dark);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: right;
            border: 1px solid var(--primary-shadow-color);
        }

        .login-info p {
            margin-bottom: 5px;
            color: var(--text-color-dark);
        }
    </style>
</head>
<body>
    <div class="mode-toggle" id="mode-toggle">
        <span id="mode-icon">â˜€ï¸</span>
    </div>

    <div class="container">
        <header>
            <div class="logo">
                <img src="https://cdn.discordapp.com/attachments/1137869934010052668/1375892910922272899/IMG_7206.jpg?ex=683357a0&is=68320620&hm=eaeaec759217ae74d7636bc562f6c84e4e1e10636a9b77193559f94fa33c829e&" alt="Wick Studio Logo">
                <div class="logo-text">SWP COMMUNITY</div>
            </div>
            <nav>
                <ul>
                    <li><button id="home-btn" class="btn active-btn" onclick="showPage('home-page')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button></li>
                    <li><button id="features-btn" class="btn" onclick="showPage('features-page')">Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª</button></li>
                    <li><button id="rules-btn" class="btn" onclick="showPage('rules-page')">Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</button></li>
                    <li><button id="rating-btn" class="btn" onclick="showPage('rating-page')">Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</button></li>
                    <li><button id="contact-btn" class="btn" onclick="showPage('contact-page')">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</button></li>
                    <li><button id="status-btn" class="btn" onclick="showPage('status-page')">Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±</button></li>
                    <li id="admin-panel-nav-item" style="display: none;"><button id="admin-panel-btn" class="btn" onclick="showPage('admin-panel-page')">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button></li>
                </ul>
            </nav>
        </header>

        <div class="main-content">
            <h1 class="title floating">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ SWP SERVER</h1>
            <p class="subtitle">Ù…ÙˆÙ‚Ø¹ Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„ØªØ¹Ø±ÙŠÙ ÙˆØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³ÙŠØ±ÙØ± Ù…Ù† Ø¨Ø±Ù…Ø¬Ø© ÙØ±Ø§Ø³</p>
            
            <div id="login-section" class="login-section">
                <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h2>
                <div id="logged-out-view">
                    <button class="btn" onclick="loginWithDiscord()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</button>
                </div>
                <div id="logged-in-view" style="display: none;">
                    <div class="login-info">
                        <p>Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ <strong id="display-username"></strong>!</p>
                        <p>Ù…Ø¹Ø±Ù Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯: <span id="display-discord-id"></span></p>
                        <p>Ø¹Ø¯Ø¯ Ø²ÙˆØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹: <span id="visitor-count">0</span></p>
                    </div>
                    <button class="btn" onclick="logoutUser()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
                </div>
            </div>

            <div class="buttons">
                <button class="btn" onclick="showPage('features-page')">Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø³ÙŠØ±ÙØ±</button>
                <button class="btn" onclick="showPage('rules-page')">Ø§Ø³ØªØ¹Ø±Ø§Ø¶ Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</button>
                <button class="btn" onclick="showPage('rating-page')">Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚ÙŠÙŠÙ…</button>
                <button class="btn" onclick="showPage('contact-page')">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</button>
                <button class="btn" onclick="showPage('status-page')">Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±</button>
            </div>

            <div id="home-page" class="page" style="display: block;">
                <h2>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø§Ù„Ø±Ø³Ù…ÙŠ</h2>
                <p>Ù†Ø­Ù† Ù†Ù‚Ø¯Ù… Ø®Ø¯Ù…Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ© ÙÙŠ Ù…Ø¬Ø§Ù„ Ù…Ø§ÙŠÙ† ÙƒØ±Ø§ÙØªØŒ ÙˆÙ†Ø³Ø¹Ù‰ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù„ØªÙ‚Ø¯ÙŠÙ… Ø£ÙØ¶Ù„ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª ÙˆØ§Ù„Ø§Ù„Ø¹Ø§Ø¨ Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†Ø§.</p>
                <p>Ø§Ø³ØªÙƒØ´Ù Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ø¹Ù† Ø®Ø¯Ù…Ø§ØªÙ†Ø§ ÙˆÙ…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø³ÙŠØ±ÙØ± ÙˆÙ‚ÙˆØ§Ù†ÙŠÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ØŒ ÙˆÙ„Ø§ ØªÙ†Ø³Ù‰ Ù…Ø´Ø§Ø±ÙƒØªÙ†Ø§ Ø±Ø£ÙŠÙƒ Ù…Ù† Ø®Ù„Ø§Ù„ ØµÙØ­Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ….</p>
                <p>Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ ØªØ¬Ø±Ø¨Ø© ÙØ±ÙŠØ¯Ø© Ù…Ù† Ù†ÙˆØ¹Ù‡Ø§ Ù…Ø¹ ÙØ±ÙŠÙ‚ Ù…Ø­ØªØ±Ù ÙŠÙ‡ØªÙ… Ø¨Ø£Ø¯Ù‚ Ø§Ù„ØªÙØ§ØµÙŠÙ„.</p>
            </div>

            <div id="features-page" class="page">
                <h2>Ù…Ù…ÙŠØ²Ø§Øª Ø³ÙŠØ±ÙØ± SWP server</h2>
                <p>ÙŠÙˆÙØ± Ø³ÙŠØ±ÙØ± SWP server Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ù…Ø²Ø§ÙŠØ§ ÙˆØ§Ù„Ø®ØµØ§Ø¦Øµ Ù„Ø¶Ù…Ø§Ù† Ù…ØªØ¹ØªÙƒ ÙˆØªØ³Ù‡ÙŠÙ„ ØªØ¬Ø±Ø¨ØªÙƒ</p>
                
                <div class="features-container">
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ´â€â˜ ï¸</div>
                        <h3 class="feature-title">Ù…ÙˆØ¯ ÙˆÙ† Ø¨ÙŠØ³</h3>
                        <p class="feature-desc">.Ø§Ù„Ù…ÙˆØ¯ Ø§Ù„Ø§Ø³Ø§Ø³ÙŠ Ù„Ù„Ø³ÙŠØ±ÙØ± ÙˆÙ‡Ùˆ Ù…ÙˆØ¯ Ø§Ù„Ø§Ù†Ù…ÙŠ Ø§Ù„Ø´Ù‡ÙŠØ± ÙˆÙ† Ø¨ÙŠØ³</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ¤–</div>
                        <h3 class="feature-title">Ø¨ÙˆØªØ§Øª Ù…Ø®ØµØµØ©</h3>
                        <p class="feature-desc">Ù†Ø­Ù† Ù†Ø¹Ù…Ù„ Ù…Ø¹ Ø·Ø§Ù‚Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØªØ§Øª ØªØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ ØªØ¬Ø±Ø¨ØªÙƒ ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙˆØªÙƒÙˆÙ† Ø®Ø§ØµØ© Ø¨Ù†Ø§</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ</div>
                        <h3 class="feature-title">ÙØ¹Ø§Ù„ÙŠØ§Øª ÙˆÙ‡Ø¯Ø§ÙŠØ§</h3>
                        <p class="feature-desc">Ù†Ù‚Ø¯Ù… Ù†Ø­Ù† Ø§Ø¯Ø§Ø±Ø© SWP server Ù‡Ø¯Ø§ÙŠØ§ ÙˆÙØ¹Ø§Ù„ÙŠØ§Øª ÙŠÙˆÙ…ÙŠØ© ÙˆØ§Ø³Ø¨ÙˆØ¹ÙŠØ©</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ”’</div>
                        <h3 class="feature-title">Ø£Ù†Ø¸Ù…Ø© Ø­Ù…Ø§ÙŠØ© Ù…ØªØ·ÙˆØ±Ø©</h3>
                        <p class="feature-desc">Ø­Ù…Ø§ÙŠØ© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø³ÙŠØ±ÙØ± Ø¶Ø¯ Ù‡Ø¬Ù…Ø§Øª Ø§Ù„Ø±Ø§ÙŠØ¯ ÙˆØ§Ù„Ø³Ø¨Ø§Ù… ÙˆØºÙŠØ±Ù‡Ø§ Ù…Ù† Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ø£Ù…Ù†ÙŠØ©.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ­</div>
                        <h3 class="feature-title">Ù†Ø¸Ø§Ù… Ø±ØªØ¨ ØªÙØ§Ø¹Ù„ÙŠ</h3>
                        <p class="feature-desc">Ù†Ø¸Ø§Ù… Ø±ØªØ¨ Ù…ØªØ·ÙˆØ± ÙŠØªÙŠØ­ Ù„Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„ØªÙØ§Ø¹Ù„ ÙˆØ§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±ØªØ¨ Ù…Ù…ÙŠØ²Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù†Ø´Ø§Ø·Ù‡Ù….</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ®</div>
                        <h3 class="feature-title">Ø£Ù†Ø´Ø·Ø© ØªØ±ÙÙŠÙ‡ÙŠØ©</h3>
                        <p class="feature-desc">Ù†Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø§Ø¨ Ø¬Ø§Ù†Ø¨ÙŠØ© ØºÙŠØ± Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø§Ø³Ø§Ø³ÙŠØ© Ù…Ø§ÙŠÙ† ÙƒØ±Ø§ÙØª</p>
                    </div>
                </div>
            </div>

            <div id="rules-page" class="page">
                <h2>Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø®Ø¯Ù…Ø§Øª</h2>
                
                <h3 style="color: var(--primary-color); margin-top: 20px; margin-bottom: 10px;">Ù‚ÙˆØ§Ù†ÙŠÙ† Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯:</h3>
                <ul>
                    <li>Ø§Ø­ØªØ±Ø§Ù… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØªØ¬Ù†Ø¨ Ø§Ù„Ø¥Ø³Ø§Ø¡Ø© Ø§Ù„Ù„ÙØ¸ÙŠØ© Ø£Ùˆ Ø§Ù„Ø´Ø®ØµÙŠØ©.</li>
                    <li>ÙŠÙÙ…Ù†Ø¹ Ù†Ø´Ø± Ø£ÙŠ Ù…Ø­ØªÙˆÙ‰ ØºÙŠØ± Ù„Ø§Ø¦Ù‚ Ø£Ùˆ Ù…Ø®Ø§Ù„Ù Ù„Ø´Ø±ÙˆØ· Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯.</li>
                    <li>ÙŠØ¬Ø¨ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ù…Ø®ØµØµØ© Ù„ÙƒÙ„ Ù…ÙˆØ¶ÙˆØ¹ ÙˆØ§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ù†Ø¸Ø§Ù… Ø§Ù„Ø³ÙŠØ±ÙØ±.</li>
                    <li>ÙŠÙÙ…Ù†Ø¹ Ù…Ù†Ø¹Ø§Ù‹ Ø¨Ø§ØªØ§Ù‹ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªÙ‡ÙƒÙŠØ± Ø£Ùˆ Ø§Ù„Ø¨ÙˆØªØ§Øª Ø§Ù„Ù…Ø²Ø¹Ø¬Ø©.</li>
                    <li>ØªØ¬Ù†Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø± Ø§Ù„Ù…ÙØ±Ø· Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø£Ùˆ Ø§Ù„Ù…Ù†Ø´Ù† Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†.</li>
                    <li>ÙŠÙÙ…Ù†Ø¹ Ù…Ø´Ø§Ø±ÙƒØ© Ø±ÙˆØ§Ø¨Ø· Ù„Ù…ÙˆØ§Ù‚Ø¹ Ù…Ø´Ø¨ÙˆÙ‡Ø© Ø£Ùˆ Ø¶Ø§Ø±Ø©.</li>
                    <li>ÙŠØ¬Ø¨ Ø§Ø­ØªØ±Ø§Ù… Ø®ØµÙˆØµÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† ÙˆØ¹Ø¯Ù… Ù†Ø´Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙ‡Ù… Ø§Ù„Ø´Ø®ØµÙŠØ©.</li>
                </ul>

                <h3 style="color: var(--primary-color); margin-top: 20px; margin-bottom: 10px;">Ù‚ÙˆØ§Ù†ÙŠÙ† SWP server:</h3>
                <ul>
                    <li>ÙŠØ¬Ø¨ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… ÙˆØ¹Ø¯Ù… Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ù…Ù…Ù†ÙˆØ¹Ø© : Ø¸Ù„Ø§Ù… - Ø¸Ù„Ø§Ù… Ù…Ø·ÙˆØ±Ø© - Ø²Ù„Ø²Ø§Ù„ - Ø³ÙˆÙ„</li>
                    <li>ÙŠÙ…Ù†Ø¹ Ù…Ù†Ø¹Ø§ Ø¨Ø§ØªØ§ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ù‚Ø±Ø¨ Ø§Ù„Ø³Ø¨ÙˆÙ†</li>
                    <li>ÙŠÙ…Ù†Ø¹ Ù‚ØªÙ„ Ø§Ø­Ø¯ Ø¨Ø¯ÙˆÙ† Ø³Ø¨Ø¨</li>
                    <li>Ø¹Ù†Ø¯Ù…Ø§ ØªØ£ÙƒÙ„ ÙØ§ÙƒÙ‡Ø© ÙŠØ³Ù…Ø­ Ù„Ùƒ Ø¨ØªØºÙŠÙŠØ±Ù‡Ø§ Ø¨Ø¹Ø¯ Ø¹Ø´Ø±ÙŠÙ† Ø¯Ù‚ÙŠÙ‚Ø© ÙÙ‚Ø·</li>
                    <li>ÙŠÙ…Ù†Ø¹ Ù†Ø´Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ùˆ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ù‚Ø±</li>
                    <li>Ù…Ù…Ù†ÙˆØ¹ ØªØ®Ø§Ù„Ù Ø§ÙˆØ§Ù…Ø± Ù‚Ø§Ø¦Ø¯ Ø§Ù„Ø§Ø³Ø·ÙˆÙ„ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù„Ø¨Ø­Ø±ÙŠØ©</li>
                    <li>Ù…Ù…Ù†ÙˆØ¹ ØªØ®Ø§Ù„Ù Ø§ÙˆØ§Ù…Ø± Ø´Ø®Øµ ÙÙŠ Ø­Ø§Ù„ ÙƒÙ„Ø¨Ø´Ùƒ</li>
                </ul>
            </div>

            <div id="rating-page" class="page">
                <h2>Ø´Ø§Ø±ÙƒÙ†Ø§ ØªÙ‚ÙŠÙŠÙ…Ùƒ</h2>
                <div class="rating-form">
                    <form id="feedback-form">
                        <div class="form-group">
                            <label>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…:</label>
                            <div class="rating-stars">
                                <input type="radio" id="star5" name="rating" value="5" />
                                <label for="star5">â˜…</label>
                                <input type="radio" id="star4" name="rating" value="4" />
                                <label for="star4">â˜…</label>
                                <input type="radio" id="star3" name="rating" value="3" />
                                <label for="star3">â˜…</label>
                                <input type="radio" id="star2" name="rating" value="2" />
                                <label for="star2">â˜…</label>
                                <input type="radio" id="star1" name="rating" value="1" />
                                <label for="star1">â˜…</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="feedback">Ø±Ø£ÙŠÙƒ:</label>
                            <textarea id="feedback" name="feedback" required></textarea>
                        </div>
                        <button type="submit" class="btn" id="submit-review-btn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</button>
                    </form>
                    <div class="success-message" id="success-message">
                        ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚ÙŠÙŠÙ…Ùƒ Ø¨Ù†Ø¬Ø§Ø­!
                        Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ Ø¹Ù„Ù‰ ÙˆÙ‚ØªÙƒ.
                    </div>
                    <div class="error-message" id="error-message">
                        Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ….
                        ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.
                    </div>
                     <div class="spam-message" id="spam-message">
                        ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ø¨Ù„ Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚ÙŠÙŠÙ… Ø¢Ø®Ø±.
                     </div>
                     <div class="spam-message" id="profanity-message">
                        Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙƒÙ„Ù…Ø§Øª ØºÙŠØ± Ù„Ø§Ø¦Ù‚Ø©.
                     </div>
                </div>

                <div class="previous-reviews">
                    <h3>ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© (Ù…Ø¹ØªÙ…Ø¯Ø© Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©):</h3>
                    <div id="approved-reviews-list">
                        </div>
                </div>
            </div>

            <div id="contact-page" class="page">
                <h2>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h2>
                <p>ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± Ø³ÙŠØ±ÙØ± Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ù†Ø§ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø¹Ù… Ø£Ùˆ Ù„Ø·Ø±Ø­ Ø§Ø³ØªÙØ³Ø§Ø±Ø§ØªÙƒ.</p>
                <p>Ù†Ø­Ù† Ù†Ø³Ø¹Ø¯ Ø¨ØªÙ„Ù‚ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒÙ… ÙˆØ§Ù‚ØªØ±Ø§Ø­Ø§ØªÙƒÙ….</p>
                <div class="buttons">
                    <a href="https://discord.gg/3BUhsURc" target="_blank" class="btn">Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø³ÙŠØ±ÙØ± Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</a>
                </div>
            </div>

            <div id="status-page" class="page">
                <h2>Ø­Ø§Ù„Ø© Ø³ÙŠØ±ÙØ± Ù…Ø§ÙŠÙ† ÙƒØ±Ø§ÙØª (Aternos)</h2>
                <div class="server-status-card">
                    <h3>SWP Minecraft Server</h3>
                    <p>Ø§Ø³Ù… Ø§Ù„Ø³ÙŠØ±ÙØ±: <span id="server-name">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span></p>
                    <p>Ø§Ù„Ø­Ø§Ù„Ø©: <span id="server-status">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span> <span id="status-indicator" class="status-indicator"></span></p>
                    <p>Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†: <span id="player-count">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span></p>
                </div>
            </div>

            <div id="admin-panel-page" class="page">
                <h2>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</h2>
                <div id="admin-reviews-list">
                    <p id="no-pending-reviews">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©.</p>
                </div>
            </div>
        </div>

        <footer>
            Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2025 - ÙØ±Ø§Ø³ - SWP server !
        </footer>
    </div>

    <script>
        // ***************************************************************
        // ********** Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ø¹Ù„Ù‰ Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø®Ø§Ø¯Ù… **********
        // ***************************************************************
        // Ù‡Ø°Ø§ Ù…Ø¬Ø±Ø¯ ØªÙˆØ¶ÙŠØ­ Ù„Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªÙŠ Ø³ØªØ­ØªØ§Ø¬Ù‡Ø§. Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ÙØ¹Ù„ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ØªØ£ØªÙŠ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù….
        const DISCORD_CLIENT_ID = 'YOUR_DISCORD_CLIENT_ID'; // Ù…Ø¹Ø±Ù ØªØ·Ø¨ÙŠÙ‚ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
        const DISCORD_REDIRECT_URI = 'YOUR_REDIRECT_URI'; // Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø°ÙŠ Ù‚Ù…Øª Ø¨Ø¥Ø¹Ø¯Ø§Ø¯Ù‡ ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯
        const BACKEND_API_BASE_URL = 'http://localhost:3000/api'; // Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ API Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø®Ù„ÙÙŠ (Ù…Ø«Ø§Ù„)
        const ADMIN_DISCORD_ROLE_ID = 'YOUR_ADMIN_ROLE_ID'; // ID Ø±ØªØ¨Ø© Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ† ÙÙŠ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ (Ù…Ø«Ø§Ù„: '123456789012345678')
                                                             // Ø³ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù….
        const DISCORD_WEBHOOK_URL = 'https://discord.com/api/webhooks/1375810250392866917/UxvJY93G_hQjW4XtUUYdtCMtfPwGmQOSKqVHTBDKYz3a_U239Bm8UUd4mdZObB8H7dAw';
        const COOLDOWN_PERIOD = 60000; // 60 seconds

        const badWords = [
            "fuck", "shit", "asshole", "bitch", "bastard", "damn", "crap", "idiot", "moron",
            "Ø®Ø±Ø§", "Ø²ÙØª", "ÙƒÙ„Ø¨", "Ø§Ø¨Ù† ÙƒÙ„Ø¨", "Ø­Ù‚ÙŠØ±", "ÙˆØ³Ø®", "Ù‚Ø°Ø±", "Ø­Ù…Ø§Ø±", "Ø¨Ù‚Ø±Ø©", "ØºØ¨ÙŠ", "Ù…ØªØ®Ù„Ù",
            "Ù†Ø¬Ø³", "Ø¹Ø§Ù‡Ø±", "Ù…Ø®Ù†Ø«", "Ø¯Ø§Ø¹Ø´ÙŠ", "Ø¥Ø±Ù‡Ø§Ø¨ÙŠ", "ÙƒØ§ÙØ±", "Ù…Ù„Ø­Ø¯", "Ø²Ù†Ø¯ÙŠÙ‚", "Ø´Ø§Ø°", "Ø¯Ø¹Ø§Ø±Ø©",
            "Ø¬Ù†Ø³", "Ø¹Ø±ÙŠ", "Ø¥Ø¨Ø§Ø­ÙŠ", "ÙØ§Ø­Ø´", "Ø¨Ø°ÙŠØ¡", "Ø³Ø¨Ø§Ø¨", "Ø´ØªÙŠÙ…Ø©", 
            "Ù„Ø¹Ù†", "ØªÙØ§Ù‡Ø©", "Ù‡Ø±Ø§Ø¡",
            "Ø§Ø­Ø§", "ÙƒØ³", "Ø·ÙŠØ²", "Ø²Ø¨", "Ù…Øµ", "Ù†ÙŠÙƒ", "Ù‚Ø­Ø¨Ø©", "Ø¯Ø¹Ø³", "Ø¨Ù†Øª ÙˆØ³Ø®Ø©", "Ø­ÙŠÙˆØ§Ù†",
            "Ø®Ù†Ø²ÙŠØ±", "Ù‚Ø±Ø¯", "ØµØ¹Ù„ÙˆÙƒ", "ØªØ§ÙÙ‡", "Ø²Ø¨Ø§Ù„Ø©"
        ];

        let loggedInUser = null; // Stores user data after Discord login
        let userDiscordRoles = []; // Stores user's Discord roles

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.style.display = 'none';
            });
            document.getElementById(pageId).style.display = 'block';
            
            document.querySelectorAll('nav .btn').forEach(btn => {
                btn.classList.remove('active-btn');
            });
            const activeBtn = pageId.replace('-page', '-btn');
            const navButton = document.getElementById(activeBtn);
            if (navButton) {
                navButton.classList.add('active-btn');
            }

            // Specific actions for pages
            if (pageId === 'rating-page') {
                loadApprovedReviews();
            } else if (pageId === 'admin-panel-page') {
                loadPendingReviews();
            } else if (pageId === 'status-page') {
                fetchServerStatus();
            }
        }

        // --- Discord OAuth2 Login System ---
        function loginWithDiscord() {
            // Redirect to backend's Discord OAuth2 initiation endpoint
            window.location.href = `${BACKEND_API_BASE_URL}/auth/discord`;
        }

        async function handleDiscordCallback() {
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');
            const error = urlParams.get('error');

            if (error) {
                console.error('Discord OAuth Error:', error);
                alert('ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                // Clear URL parameters for cleaner look
                window.history.replaceState({}, document.title, window.location.pathname);
                return;
            }

            if (code) {
                try {
                    const response = await fetch(`${BACKEND_API_BASE_URL}/auth/discord/callback?code=${code}`);
                    const data = await response.json();

                    if (response.ok) {
                        loggedInUser = data.user; // User object from Discord (id, username, avatar, etc.)
                        userDiscordRoles = data.roles || []; // Roles array from Discord or backend
                        localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser));
                        localStorage.setItem('userDiscordRoles', JSON.stringify(userDiscordRoles));
                        updateLoginDisplay();
                        checkAdminAccess();
                        alert(`Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒØŒ ${loggedInUser.username}!`);
                    } else {
                        throw new Error(data.message || 'ÙØ´Ù„ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯.');
                    }
                } catch (error) {
                    console.error('Error handling Discord callback:', error);
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯.');
                } finally {
                    // Clear URL parameters for cleaner look
                    window.history.replaceState({}, document.title, window.location.pathname);
                }
            }
        }

        function logoutUser() {
            loggedInUser = null;
            userDiscordRoles = [];
            localStorage.removeItem('loggedInUser');
            localStorage.removeItem('userDiscordRoles');
            updateLoginDisplay();
            checkAdminAccess(); // Hide admin panel on logout
            alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­.');
        }

        function updateLoginDisplay() {
            const storedUser = localStorage.getItem('loggedInUser');
            if (storedUser) {
                loggedInUser = JSON.parse(storedUser);
                document.getElementById('logged-out-view').style.display = 'none';
                document.getElementById('logged-in-view').style.display = 'block';
                document.getElementById('display-username').textContent = loggedInUser.username;
                document.getElementById('display-discord-id').textContent = loggedInUser.id;
            } else {
                loggedInUser = null;
                document.getElementById('logged-out-view').style.display = 'block';
                document.getElementById('logged-in-view').style.display = 'none';
            }
        }

        function checkAdminAccess() {
            const adminPanelNavItem = document.getElementById('admin-panel-nav-item');
            const storedRoles = localStorage.getItem('userDiscordRoles');
            userDiscordRoles = storedRoles ? JSON.parse(storedRoles) : [];

            // This logic should ideally be confirmed by the backend to prevent client-side bypass.
            // Here, we check if the user has the specified admin role ID.
            if (loggedInUser && userDiscordRoles.includes(ADMIN_DISCORD_ROLE_ID)) {
                adminPanelNavItem.style.display = 'block';
            } else {
                adminPanelNavItem.style.display = 'none';
            }
        }

        // --- Visitor Counter ---
        function updateVisitorCount() {
            let count = localStorage.getItem('visitorCount');
            if (count === null) {
                count = 0;
            } else {
                count = parseInt(count);
            }
            count++;
            localStorage.setItem('visitorCount', count);
            document.getElementById('visitor-count').textContent = count;
        }

        // --- Review Management ---

        // Load reviews approved by admin
        async function loadApprovedReviews() {
            const reviewsList = document.getElementById('approved-reviews-list');
            reviewsList.innerHTML = '<p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©...</p>';
            try {
                const response = await fetch(`${BACKEND_API_BASE_URL}/reviews/approved`);
                const reviews = await response.json();

                reviewsList.innerHTML = ''; // Clear loading message

                if (reviews.length === 0) {
                    reviewsList.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø³Ø§Ø¨Ù‚Ø© Ù„Ø¹Ø±Ø¶Ù‡Ø§.</p>';
                    return;
                }

                reviews.forEach(review => {
                    const reviewCard = document.createElement('div');
                    reviewCard.classList.add('review-card');
                    reviewCard.innerHTML = `
                        <strong>${review.name || 'Ù…Ø¬Ù‡ÙˆÙ„'}</strong>
                        <div class="stars">${'â˜…'.repeat(review.rating)}</div>
                        <p>${review.feedback}</p>
                        ${review.discordUsername ? `<small>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯: ${review.discordUsername}</small>` : ''}
                    `;
                    reviewsList.prepend(reviewCard); // Add newest review at the top
                });
            } catch (error) {
                console.error('Error loading approved reviews:', error);
                reviewsList.innerHTML = '<p>ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</p>';
            }
        }

        // Load pending reviews for admin panel
        async function loadPendingReviews() {
            if (!loggedInUser || !userDiscordRoles.includes(ADMIN_DISCORD_ROLE_ID)) {
                document.getElementById('admin-reviews-list').innerHTML = '<p>Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©.</p>';
                document.getElementById('no-pending-reviews').style.display = 'none';
                return;
            }

            const adminReviewsList = document.getElementById('admin-reviews-list');
            adminReviewsList.innerHTML = '<p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©...</p>';
            document.getElementById('no-pending-reviews').style.display = 'none'; // Hide initially

            try {
                const response = await fetch(`${BACKEND_API_BASE_URL}/reviews/pending`); // Assuming backend endpoint
                const reviews = await response.json();

                adminReviewsList.innerHTML = ''; // Clear loading message

                if (reviews.length === 0) {
                    document.getElementById('no-pending-reviews').style.display = 'block';
                    return;
                }

                reviews.forEach(review => {
                    const reviewCard = document.createElement('div');
                    reviewCard.classList.add('admin-panel-review-card');
                    reviewCard.innerHTML = `
                        <strong>${review.name || 'Ù…Ø¬Ù‡ÙˆÙ„'}</strong>
                        <div class="stars">${'â˜…'.repeat(review.rating)}</div>
                        <p>${review.feedback}</p>
                        ${review.discordUsername ? `<small>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯: ${review.discordUsername}</small>` : ''}
                        <div class="actions" style="margin-top: 15px;">
                            <button class="approve-btn" data-review-id="${review.id}">Ù…ÙˆØ§ÙÙ‚Ø©</button>
                            <button class="delete-btn" data-review-id="${review.id}">Ø­Ø°Ù</button>
                        </div>
                    `;
                    adminReviewsList.appendChild(reviewCard);
                });

                adminReviewsList.querySelectorAll('.approve-btn').forEach(button => {
                    button.addEventListener('click', (e) => approveReview(e.target.dataset.reviewId));
                });
                adminReviewsList.querySelectorAll('.delete-btn').forEach(button => {
                    button.addEventListener('click', (e) => deleteReview(e.target.dataset.reviewId));
                });

            } catch (error) {
                console.error('Error loading pending reviews:', error);
                adminReviewsList.innerHTML = '<p>ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</p>';
            }
        }

        async function approveReview(reviewId) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…ØŸ')) return;
            try {
                const response = await fetch(`${BACKEND_API_BASE_URL}/reviews/${reviewId}/approve`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${loggedInUser.token}` // Send user token for authorization
                    }
                });
                if (response.ok) {
                    alert('ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ù†Ø¬Ø§Ø­.');
                    loadPendingReviews(); // Reload pending reviews
                    loadApprovedReviews(); // Refresh approved reviews list
                } else {
                    const errorData = await response.json();
                    alert(`ÙØ´Ù„ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: ${errorData.message || response.statusText}`);
                }
            } catch (error) {
                console.error('Error approving review:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ….');
            }
        }

        async function deleteReview(reviewId) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…ØŸ')) return;
            try {
                const response = await fetch(`${BACKEND_API_BASE_URL}/reviews/${reviewId}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${loggedInUser.token}` // Send user token for authorization
                    }
                });
                if (response.ok) {
                    alert('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ù†Ø¬Ø§Ø­.');
                    loadPendingReviews(); // Reload pending reviews
                    loadApprovedReviews(); // Refresh approved reviews list
                } else {
                    const errorData = await response.json();
                    alert(`ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: ${errorData.message || response.statusText}`);
                }
            } catch (error) {
                console.error('Error deleting review:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­Ø°Ù Ø§Ù„ØªÙ‚ÙŠÙŠÙ….');
            }
        }

        function containsProfanity(text) {
            return badWords.some(word => {
                const regex = new RegExp(`\\b${word}\\b`, 'gi');
                return regex.test(text);
            });
        }

        function filterProfanity(text) {
            let cleanedText = text;
            badWords.forEach(word => {
                const regex = new RegExp(`\\b${word}\\b`, 'gi'); // Whole word, case-insensitive
                cleanedText = cleanedText.replace(regex, '*'.repeat(word.length));
            });
            return cleanedText;
        }

        document.getElementById('feedback-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Spam protection
            const lastSubmissionTime = localStorage.getItem('lastReviewSubmission');
            if (lastSubmissionTime && (Date.now() - lastSubmissionTime < COOLDOWN_PERIOD)) {
                document.getElementById('spam-message').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('spam-message').style.display = 'none';
                }, 3000);
                return;
            }

            if (!loggedInUser) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ù„Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚ÙŠÙŠÙ….');
                return;
            }

            const rating = document.querySelector('input[name="rating"]:checked') ? parseInt(document.querySelector('input[name="rating"]:checked').value) : 0;
            let feedback = document.getElementById('feedback').value;

            if (rating === 0) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØªÙ‚ÙŠÙŠÙ… Ø¨Ø§Ù„Ù†Ø¬ÙˆÙ….');
                return;
            }
            if (feedback.trim() === '') {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø±Ø£ÙŠÙƒ.');
                return;
            }

            // Profanity filter
            if (containsProfanity(feedback)) {
                document.getElementById('profanity-message').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('profanity-message').style.display = 'none';
                }, 5000);
                return;
            }
            feedback = filterProfanity(feedback);

            const reviewData = {
                discordUserId: loggedInUser.id,
                name: loggedInUser.username, // Use Discord username as name
                discordUsername: loggedInUser.discriminator ? `${loggedInUser.username}#${loggedInUser.discriminator}` : loggedInUser.username, // Full username with discriminator if available
                rating: rating,
                feedback: feedback,
                avatarUrl: loggedInUser.avatar ? `https://cdn.discordapp.com/avatars/${loggedInUser.id}/${loggedInUser.avatar}.png` : 'DEFAULT_AVATAR_URL' // Default avatar if none
            };

            try {
                const response = await fetch(`${BACKEND_API_BASE_URL}/reviews`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${loggedInUser.token}` // Send user token for authorization
                    },
                    body: JSON.stringify(reviewData),
                });

                if (response.ok) {
                    document.getElementById('success-message').style.display = 'block';
                    document.getElementById('feedback-form').reset();
                    // Reviews are now pending admin approval, so no immediate reload of approved reviews.
                    // Instead, we might show a message like "ØªÙ‚ÙŠÙŠÙ…Ùƒ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©".
                    localStorage.setItem('lastReviewSubmission', Date.now());

                    setTimeout(() => {
                        document.getElementById('success-message').style.display = 'none';
                    }, 5000);

                    // Send to Discord Webhook for immediate notification (optional, can be done by backend)
                    sendReviewToDiscordWebhook(reviewData, "Pending Review");

                } else {
                    const errorData = await response.json();
                    document.getElementById('error-message').style.display = 'block';
                    setTimeout(() => {
                        document.getElementById('error-message').style.display = 'none';
                    }, 5000);
                    console.error('Failed to submit review:', errorData.message || response.statusText);
                }
            } catch (error) {
                console.error('Error submitting review:', error);
                document.getElementById('error-message').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('error-message').style.display = 'none';
                }, 5000);
            }
        });

        async function sendReviewToDiscordWebhook(review, status) {
            const webhookData = {
                embeds: [{
                    title: `ØªÙ‚ÙŠÙŠÙ… Ø¬Ø¯ÙŠØ¯ (${status})`,
                    color: status === "Pending Review" ? 16763904 : 4886754, // Orange for pending, blue for approved
                    fields: [
                        { name: "Ø§Ù„Ø§Ø³Ù…", value: review.name, inline: true },
                        { name: "Ø§Ù„ØªÙ‚ÙŠÙŠÙ…", value: "â˜…".repeat(review.rating) + "â˜†".repeat(5 - review.rating), inline: true },
                        { name: "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯", value: review.discordUsername, inline: true },
                        { name: "Ø§Ù„ØªØ¹Ù„ÙŠÙ‚", value: review.feedback },
                    ],
                    timestamp: new Date().toISOString(),
                    footer: { text: "SWP COMMUNITY Rating System" }
                }]
            };

            try {
                await fetch(DISCORD_WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(webhookData),
                });
            } catch (error) {
                console.error('Error sending review to Discord webhook:', error);
            }
        }


        // --- Server Status ---
        async function fetchServerStatus() {
            const serverNameElement = document.getElementById('server-name');
            const serverStatusElement = document.getElementById('server-status');
            const statusIndicator = document.getElementById('status-indicator');
            const playerCountElement = document.getElementById('player-count');

            serverNameElement.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...';
            serverStatusElement.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...';
            playerCountElement.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...';
            statusIndicator.className = 'status-indicator'; // Reset class

            try {
                // This API call needs to go to your backend, which then fetches from Aternos or a proxy
                const response = await fetch(`${BACKEND_API_BASE_URL}/server-status`);
                const data = await response.json();

                if (response.ok) {
                    serverNameElement.textContent = data.name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                    serverStatusElement.textContent = data.online ? 'Ù…ØªØµÙ„' : 'ØºÙŠØ± Ù…ØªØµÙ„';
                    statusIndicator.classList.add(data.online ? 'status-online' : 'status-offline');
                    playerCountElement.textContent = data.online ? `${data.players.online}/${data.players.max}` : 'N/A';
                } else {
                    throw new Error(data.message || 'ÙØ´Ù„ Ø¬Ù„Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±.');
                }
            } catch (error) {
                console.error('Error fetching server status:', error);
                serverNameElement.textContent = 'Ø®Ø·Ø£';
                serverStatusElement.textContent = 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„';
                statusIndicator.classList.add('status-offline');
                playerCountElement.textContent = 'Ø®Ø·Ø£';
                alert('ÙØ´Ù„ Ø¬Ù„Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.');
            }
        }


        const buttons = document.querySelectorAll('.btn');
        buttons.forEach(button => {
            button.addEventListener('mouseover', () => {
                button.style.boxShadow = '0 0 25px rgba(114, 137, 218, 0.9)';
            });
            
            button.addEventListener('mouseout', () => {
                if (!button.classList.contains('active-btn')) {
                    button.style.boxShadow = '0 0 15px rgba(114, 137, 218, 0.5)';
                }
            });
        });

        // --- Dark/Light Mode Toggle ---
        const modeToggle = document.getElementById('mode-toggle');
        const modeIcon = document.getElementById('mode-icon');

        function setMode(mode) {
            if (mode === 'light') {
                document.body.classList.add('light-mode');
                modeIcon.textContent = 'ğŸŒ™'; // Moon icon for light mode (to switch to dark)
                localStorage.setItem('theme', 'light');
            } else {
                document.body.classList.remove('light-mode');
                modeIcon.textContent = 'â˜€ï¸'; // Sun icon for dark mode (to switch to light)
                localStorage.setItem('theme', 'dark');
            }
        }

        modeToggle.addEventListener('click', () => {
            if (document.body.classList.contains('light-mode')) {
                setMode('dark');
            } else {
                setMode('light');
            }
        });

        // Initial calls
        document.addEventListener('DOMContentLoaded', () => {
            showPage('home-page'); // Ensure home page is shown on load
            updateVisitorCount(); // Increment and display visitor count
            
            // Handle Discord OAuth2 callback on page load
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('code') || urlParams.has('error')) {
                handleDiscordCallback();
            } else {
                updateLoginDisplay(); // Initialize login status if not a callback
                checkAdminAccess(); // Check admin status on load
            }
        });
    </script>
</body>
</html>
